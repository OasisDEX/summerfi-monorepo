query GetUserPositions($accountAddress: String!) {
  positions(where: { account_contains_nocase: $accountAddress }) {
    id
    inputTokenBalance
    outputTokenBalance
    stakedInputTokenBalance
    stakedOutputTokenBalance
    createdTimestamp
    inputTokenDeposits
    inputTokenWithdrawals
    inputTokenDepositsNormalizedInUSD
    inputTokenWithdrawalsNormalizedInUSD
    vault {
      id
      inputTokenBalance
      inputTokenPriceUSD
      outputTokenPriceUSD
      rebalanceCount
      pricePerShare
      inputToken {
        id
        symbol
        name
        decimals
      }
      outputToken {
        id
        symbol
        name
        decimals
      }
      protocol {
        id
      }
    }
    account {
      id
    }
    claimedSummerToken
    claimableSummerToken
    claimedSummerTokenNormalized
    claimableSummerTokenNormalized
    rewards {
      claimedNormalized
      claimableNormalized
      rewardToken {
        symbol
        lastPriceUSD
      }
    }
  }
}

query GetUserPosition($accountAddress: String!, $vaultId: String!) {
  positions(where: { account_contains_nocase: $accountAddress, vault: $vaultId }) {
    id
    inputTokenBalance
    outputTokenBalance
    stakedInputTokenBalance
    stakedOutputTokenBalance
    createdTimestamp
    inputTokenDeposits
    inputTokenWithdrawals
    inputTokenDepositsNormalizedInUSD
    inputTokenWithdrawalsNormalizedInUSD
    vault {
      id
      inputTokenBalance
      inputTokenPriceUSD
      outputTokenPriceUSD
      pricePerShare
      inputToken {
        id
        symbol
        name
        decimals
      }
      outputToken {
        id
        symbol
        name
        decimals
      }
      protocol {
        id
      }
    }
    account {
      id
    }
    claimedSummerToken
    claimableSummerToken
    claimedSummerTokenNormalized
    claimableSummerTokenNormalized
    rewards {
      claimedNormalized
      claimableNormalized
      rewardToken {
        symbol
        lastPriceUSD
      }
    }
  }
}

query GetPosition($id: ID!) {
  positions(where: { id: $id }) {
    id
    inputTokenBalance
    outputTokenBalance
    stakedInputTokenBalance
    stakedOutputTokenBalance
    createdTimestamp
    inputTokenDeposits
    inputTokenWithdrawals
    inputTokenDepositsNormalizedInUSD
    inputTokenWithdrawalsNormalizedInUSD
    vault {
      id
      inputTokenBalance
      inputTokenPriceUSD
      outputTokenPriceUSD
      pricePerShare
      inputToken {
        id
        symbol
        name
        decimals
      }
      outputToken {
        id
        symbol
        name
        decimals
      }
      protocol {
        id
      }
    }
    account {
      id
    }
    claimedSummerToken
    claimableSummerToken
    claimedSummerTokenNormalized
    claimableSummerTokenNormalized
    rewards {
      claimedNormalized
      claimableNormalized
      rewardToken {
        symbol
        lastPriceUSD
      }
    }
  }
}

query GetDeposits($id: ID!, $first: Int!, $skip: Int!) {
  positions(where: { id: $id }) {
    id
    deposits(first: $first, skip: $skip, orderBy: timestamp, orderDirection: desc) {
      id
      from
      to
      timestamp
      hash
      asset {
        id
        symbol
        name
        decimals
      }
      amount
      inputTokenBalance
      amountUSD
      inputTokenBalanceNormalizedUSD
    }
  }
}

query GetWithdrawals($id: ID!, $first: Int!, $skip: Int!) {
  positions(where: { id: $id }) {
    id
    withdrawals(first: $first, skip: $skip, orderBy: timestamp, orderDirection: desc) {
      id
      from
      to
      timestamp
      hash
      asset {
        id
        symbol
        name
        decimals
      }
      amount
      inputTokenBalance
      amountUSD
      inputTokenBalanceNormalizedUSD
    }
  }
}
