query GetVaultHistory($vaultId: ID!) {
  vault(id: $vaultId) {
    id
    protocol {
      network
    }
    inputToken {
      symbol
      decimals
    }
    inputTokenBalance
    hourlyVaultHistory: hourlySnapshots(
      first: 721 # 30 days in hours + 1 point of leeway
      orderBy: timestamp
      orderDirection: desc
    ) {
      netValue: inputTokenBalanceNormalized
      navPrice: pricePerShare
      timestamp
    }
    dailyVaultHistory: dailySnapshots(
      first: 366 # 1 year in days + 1 point of leeway
      orderBy: timestamp
      orderDirection: desc
    ) {
      netValue: inputTokenBalanceNormalized
      navPrice: pricePerShare
      timestamp
    }
    weeklyVaultHistory: weeklySnapshots(
      first: 157 # 3 years in weeks + 1 point of leeway
      orderBy: timestamp
      orderDirection: desc
    ) {
      netValue: inputTokenBalanceNormalized
      navPrice: pricePerShare
      timestamp
    }
  }
}

query GetVaultActiveUsers($vaultId: ID!) {
  vault(id: $vaultId) {
    positions {
      account {
        id
      }
      inputTokenDeposits
      inputTokenDepositsNormalized
      latestDepositTest: deposits(first:1, orderBy: timestamp, orderDirection: desc) {
        timestamp
      }
      latestDeposit: deposits(first:1, orderBy: timestamp, orderDirection: desc) {
        timestamp
      }
      latestWithdrawal: withdrawals(first:1, orderBy: timestamp, orderDirection: desc) {
        timestamp
      }
      firstDeposit: deposits(first:1, orderBy: timestamp, orderDirection: asc) {
        timestamp
      }
      firstWithdrawal: withdrawals(first:1, orderBy: timestamp, orderDirection: asc) {
        timestamp
      }
    }
  }
}